(this["webpackJsonpvirtual-background-demo"]=this["webpackJsonpvirtual-background-demo"]||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},34:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),i=a(6),r=a.n(i),c=a(4),l=a(7),s=a(17),f=a(11),u=a.n(f),d=u.a.mark(h);function h(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),d)}var v={counter:0},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=(arguments.length>1&&arguments[1],Object.assign({},e));return t.counter++,t},p=a(36),g=Object(p.a)({INITIALIZE:function(e){return e}}),V=a(15),E=a(16),w=a(19),b=a(18),R=a(3),C=function(e){Object(w.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(V.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).localCanvasRef=o.createRef(),e.localVideoRef=o.createRef(),e.localVideoEffectors=null,e.isIPhone=!1,e.enter=0,e.exit=0,e.drawVideoCanvas=function(){e.enter=performance.now();(e.enter-e.exit).toFixed(3);var t=performance.now();if(null!==e.localCanvasRef.current){var a=480/e.localCanvasRef.current.width*e.localCanvasRef.current.height;if(e.localVideoEffectors.doEffect(480,a),0!==e.localVideoEffectors.outputWidth&&0!==e.localVideoEffectors.outputHeight)e.localCanvasRef.current.height=e.localCanvasRef.current.width/e.localVideoEffectors.outputWidth*e.localVideoEffectors.outputHeight,e.localCanvasRef.current.getContext("2d").drawImage(e.localVideoEffectors.outputCanvas,0,0,e.localCanvasRef.current.width,e.localCanvasRef.current.height)}(performance.now()-t).toFixed(3);e.exit=performance.now(),requestAnimationFrame((function(){return e.drawVideoCanvas()}))},e.media=null,e.status="status1",e}return Object(E.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URL(window.location.href).searchParams.get("model"),a=new URL(window.location.href).searchParams.get("blur"),o=0;this.localVideoEffectors="MobileNetV1"===t?new R.LocalVideoEffectors(R.ModelConfigMobileNetV1):"MobileNetV1_05"===t?new R.LocalVideoEffectors(R.ModelConfigMobileNetV1_05):"ResNet"===t?new R.LocalVideoEffectors(R.ModelConfigResNet):new R.LocalVideoEffectors(null),o=null===a?0:parseInt(a),this.localVideoEffectors.cameraEnabled=!0,this.localVideoEffectors.virtualBackgroundEnabled=!0,this.localVideoEffectors.virtualBackgroundImagePath="/resources/vbg/pic1.jpg",this.localVideoEffectors.maskBlurAmount=o,this.localVideoEffectors.canny=!1,this.localVideoEffectors.selectInputVideoDevice("").then((function(){e.media=e.localVideoEffectors.getMediaStream(),e.status="get media",console.log(""+e.media),requestAnimationFrame((function(){return e.drawVideoCanvas()}))}))}},{key:"render",value:function(){var e=this;return navigator.userAgent.indexOf("iPhone")>=0&&(this.isIPhone=!0),!1===this.isIPhone?o.createElement("div",{style:{width:"480px",margin:"auto"}},o.createElement("canvas",{ref:this.localCanvasRef,style:{display:"block",width:"480px",margin:"auto"}})):o.createElement("div",{style:{width:"480px",margin:"auto"}},o.createElement("video",{ref:this.localVideoRef,style:{display:"block",width:"480px",margin:"auto"},playsInline:!0}),o.createElement("canvas",{ref:this.localCanvasRef,style:{display:"block",width:"480px",margin:"auto"}}),o.createElement("input",{type:"button",value:"start",onClick:function(t){navigator.mediaDevices.getUserMedia({audio:!1,video:{width:{ideal:1280},height:{ideal:720}}}).then((function(t){if(null!==t)return e.localVideoRef.current.srcObject=t,e.localVideoRef.current.play(),new Promise((function(t,a){e.localVideoRef.current.onloadedmetadata=function(){t()}}))})),e.localVideoEffectors.setVideoElement(e.localVideoRef.current)}}))}}]),a}(o.Component);var y=Object(l.b)((function(e){return e}),(function(e){return{initialize:function(t){e(g.initialize(t))}}}))(C),k=Object(s.a)(),x=Object(c.d)(m,Object(c.a)(k));k.run(h),r.a.render(n.a.createElement(l.a,{store:x},n.a.createElement(y,null)),document.getElementById("root"))}},[[20,1,2]]]);